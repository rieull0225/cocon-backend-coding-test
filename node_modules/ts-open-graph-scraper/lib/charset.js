"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var CHARTSET_RE = /(?:charset|encoding)\s{0,10}=\s{0,10}['"]? {0,10}([\w\-]{1,100})/i;
function charset(obj, data, peekSize) {
    var matchs;
    var end = 0;
    if (data) {
        peekSize = peekSize || 512;
        end = data.length > peekSize ? peekSize : data.length;
    }
    var contentType = obj;
    if (contentType && typeof contentType !== 'string') {
        var headers = obj;
        if (obj.headers) {
            headers = obj.headers;
        }
        contentType = headers['content-type'] || headers['Content-Type'];
    }
    if (contentType) {
        matchs = CHARTSET_RE.exec(contentType);
    }
    if (!matchs && end > 0) {
        contentType = data.slice(0, end).toString();
        matchs = CHARTSET_RE.exec(contentType);
    }
    var cs = undefined;
    if (matchs) {
        cs = matchs[1].toLowerCase();
        if (cs === 'utf-8') {
            cs = 'utf8';
        }
    }
    return cs;
}
exports.default = charset;
